<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course List with Assignments</title>
    <style> /* So much trial and error this hurts */
        * {
            box-sizing: border-box;
        }

        body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            flex-direction: row-reverse;
        }

        /* Left section - where the course list and forms will be */
        .left-section {
            width: 50%;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        /* Right section - where the avatar and other info might go */
        .right-section {
            width: 50%;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        /* Box for holding content */
        .top-box,
        .bottom-box {
            border: 1px solid #ccc;
            padding: 180px;
            margin-bottom: 10px;
        }

        .course-list-container {
            margin-bottom: 20px;
        }

        .assignment-list {
            margin-left: 20px;
            list-style-type: none;
        }

        /* Each course item will look like this */
        .course-item {
            margin-bottom: 15px;
        }

        .course-title {
            font-weight: bold;
        }

        select {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        #remove-section {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <!-- Left section for adding courses and assignments -->
    <div class="left-section">
        <h1>Course List with Assignments</h1>

        <!-- Section to show all courses -->
        <h2>Your Course List</h2>
        <div class="course-list-container">
            <ul id="course-list"></ul>
        </div>

        <!-- Form to add a new course -->
        <h2>Add New Course</h2>
        <form id="add-course-form">
            <label for="new-course-name">Enter New Course Name:</label>
            <input type="text" id="new-course-name" required><br><br>
            <button type="submit">Add Course</button>
        </form>

        <!-- Form to add an assignment to a course -->
        <h2>Add Assignment to a Course</h2>
        <form id="assignment-form">
            <label for="assignment-name">Assignment Name:</label>
            <input type="text" id="assignment-name" required><br><br>

            <label for="due-date">Due Date:</label>
            <input type="date" id="due-date" required><br><br>

            <label for="select-course-assignment">Select Course:</label>
            <select id="select-course-assignment" required></select><br><br>

            <button type="submit">Add Assignment</button>
        </form>

        <!-- Section for removing courses or assignments -->
        <div id="remove-section">
            <h2>Remove Course or Assignment</h2>
            <label for="remove-select">Select a Course or Assignment to Remove:</label>
            <select id="remove-select">
                <option value="" disabled selected>Select Course or Assignment</option>
            </select><br><br>

            <button id="remove-button">Remove</button>
        </div>
    </div>

    <!-- Right section for some additional information -->
    <div class="right-section">
        <!-- Placeholder box for an avatar -->
        <div class="top-box">
            <p>Avatar</p>
        </div>

        <!-- Placeholder box for the course list info -->
        <div class="bottom-box">
            <p>Course list here</p>
        </div>
    </div>

    <script> //I tried my best on this but it ended up being like 30% chatgpt gimme a break :')
        // load the courses stored in localStorage
        function loadCourses() {
            const savedCourses = localStorage.getItem('userCourses');
            // If we have courses saved, return them as an array
            return savedCourses ? JSON.parse(savedCourses) : []; 
        }

        // save the current list of courses to localStorage (I HATED THIS)
        function saveCourses() {
            localStorage.setItem('userCourses', JSON.stringify(courses));
        }

        // load course from localStorage
        let courses = loadCourses();

        // update the course list displayed on the page
        function updateCourseList() {
            const courseList = document.getElementById("course-list");
            const courseSelectAssignment = document.getElementById("select-course-assignment");
            const removeSelect = document.getElementById("remove-select");

            courseList.innerHTML = "";
            courseSelectAssignment.innerHTML = "<option value='' disabled selected>Select Course</option>";
            removeSelect.innerHTML = "<option value='' disabled selected>Select Course or Assignment</option>";

            courses.forEach((course, index) => {
                const listItem = document.createElement("li");
                listItem.classList.add("course-item");

                // Display the course name as the title
                const courseTitle = document.createElement("span");
                courseTitle.classList.add("course-title");
                courseTitle.textContent = `${course.courseName}:`;
                listItem.appendChild(courseTitle);

                // Display assignment below the course name
                if (course.assignments.length > 0) {
                    const assignmentList = document.createElement("ul");
                    assignmentList.classList.add("assignment-list");

                    course.assignments.forEach((assignment) => {
                        const assignmentItem = document.createElement("li");
                        assignmentItem.textContent = `${assignment.assignmentName} - Due: ${assignment.dueDate}`;
                        assignmentList.appendChild(assignmentItem);
                    });

                    listItem.appendChild(assignmentList);
                }

                courseList.appendChild(listItem);

                // Add this course to the assignment dropdown
                const courseAssignmentOption = document.createElement("option");
                courseAssignmentOption.value = index;
                courseAssignmentOption.textContent = `${course.courseName}`;
                courseSelectAssignment.appendChild(courseAssignmentOption);

                // Add this course to the remove dropdown
                const courseOption = document.createElement("option");
                courseOption.value = `course-${index}`;
                courseOption.textContent = `Course: ${course.courseName}`;
                removeSelect.appendChild(courseOption);

                // Add each assignment to the remove dropdown
                course.assignments.forEach((assignment, assignmentIndex) => {
                    const assignmentOption = document.createElement("option");
                    assignmentOption.value = `assignment-${index}-${assignmentIndex}`;
                    assignmentOption.textContent = `Assignment: ${assignment.assignmentName} - Due: ${assignment.dueDate}`;
                    removeSelect.appendChild(assignmentOption);
                });
            });
        }

        // remove a course from the list
        function removeCourse(courseIndex) {
            courses.splice(courseIndex, 1); // Remove the course from the array
            saveCourses(); // Save the updated list to localStorage
            updateCourseList(); // Update the displayed list
        }

        // remove an assignment from a course
        function removeAssignment(courseIndex, assignmentIndex) {
            courses[courseIndex].assignments.splice(assignmentIndex, 1); // Remove the assignment from the course
            saveCourses(); 
            updateCourseList(); 
        }

        // Event listener for adding a new course
        document.getElementById("add-course-form").addEventListener("submit", function(event) {
            event.preventDefault(); 
            const newCourseName = document.getElementById("new-course-name").value.trim();

            // create a new course object and add it to the courses array
            if (newCourseName) {
                const newCourse = { courseName: newCourseName, assignments: [] };
                courses.push(newCourse);
                saveCourses(); 
                updateCourseList(); 
            }

            // Clear the input field after submitting the form
            document.getElementById("new-course-name").value = ""; 
        });

        // adding an assignment to a course
        document.getElementById("assignment-form").addEventListener("submit", function(event) {
            event.preventDefault(); 
            const assignmentName = document.getElementById("assignment-name").value.trim();
            const dueDate = document.getElementById("due-date").value;
            const courseIndex = document.getElementById("select-course-assignment").value;

            // Add the new assignment to the selected course
            if (assignmentName && dueDate && courseIndex !== "") {
                const course = courses[courseIndex];
                course.assignments.push({ assignmentName, dueDate });
                saveCourses(); 
                updateCourseList(); 

                // Clear the form fields after submission
                document.getElementById("assignment-name").value = "";
                document.getElementById("due-date").value = "";
            }
        });

        // removing a course or assignment
        document.getElementById("remove-button").addEventListener("click", function() {
            const removeSelect = document.getElementById("remove-select");
            const selectedValue = removeSelect.value;

            
            if (selectedValue) {
                if (selectedValue.startsWith("course-")) {
                    const courseIndex = parseInt(selectedValue.split("-")[1]);
                    removeCourse(courseIndex);
                } else if (selectedValue.startsWith("assignment-")) {
                    const parts = selectedValue.split("-");
                    const courseIndex = parseInt(parts[1]);
                    const assignmentIndex = parseInt(parts[2]);
                    removeAssignment(courseIndex, assignmentIndex);
                }
            }
        });

        // When the page loads update the course list
        document.addEventListener("DOMContentLoaded", function() {
            updateCourseList(); 
        });
    </script>
</body>
</html>
